<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	
<h:body>
	<ui:composition template="/template/template.xhtml">

		<ui:define name="content">
			<h:form id="formMembre">
				<ui:include  src="/pages/private/message.xhtml" />
				<h:inputHidden value="#{membreBean.membre.idMembre}"  />
				<h:inputHidden value="#{membreBean.oldMembreEmail}"  />
				<h:panelGrid columns="2" border="0" cellpadding="10" cellspacing="1">
					<h:outputLabel value="#{msg.libelle_nom}" />
					<h:inputText value="#{membreBean.membre.membreNom}" maxlength="60" required="true" requiredMessage="#{msg.nom_obligatoire}" />
					
					<h:outputLabel value="#{msg.libelle_prenom}" />
					<h:inputText value="#{membreBean.membre.membrePrenom}" maxlength="60" required="true" requiredMessage="#{msg.prenom_obligatoire}" />
					
					<h:outputLabel value="#{msg.libelle_email}" />
					<h:inputText value="#{membreBean.membre.membreEmail}" maxlength="120" required="true" requiredMessage="#{msg.email_obligatoire}" />
					
					<h:outputLabel value="#{msg.libelle_tel}" />
					<h:inputText value="#{membreBean.membre.membreTel}" maxlength="20" required="true" requiredMessage="#{msg.tel_obligatoire}" />	
					
			   		<h:outputLabel for="idorga" value="#{msg.libelle_orga}" />
					<h:selectOneMenu id="idorga" value="#{membreBean.membre.idOrga.idOrga}" disabled="#{membreBean.orgaDisabled}">
					    <p:ajax listener="#{membreBean.onOrganisationChange}" update="idDepartement,formMembre" />
					    <f:selectItems value="#{membreBean.organisationList}" var="c" itemLabel="#{c.orgaNom}" itemValue="#{c.idOrga}" />
					</h:selectOneMenu>
					
					<h:outputLabel for="idDepartement" value="#{msg.libelle_dept}" />
					<h:selectOneMenu id="idDepartement" value="#{membreBean.membre.idDepartement.idDepartement}">
					    <f:selectItems value="#{membreBean.departementList}" var="c" itemLabel="#{c.departementNom}" itemValue="#{c.idDepartement}" />
					</h:selectOneMenu>

					<h:outputLabel value="#{msg.libelle_role}" />
					<h:selectOneMenu value="#{membreBean.membre.idProfil.idProfil}">
						<p:ajax listener="#{membreBean.onRoleChange}" update="formMembre" />
			   			<f:selectItems value="#{membreBean.roleList}" var="c" itemLabel="#{c.profilLibelle}" itemValue="#{c.idProfil}" />
			   		</h:selectOneMenu>	
			   		
					<h:outputLabel id="idParrain_libelle" value="#{msg.libelle_parrain}" rendered="#{membreBean.parrainRendered}" />
					<h:selectOneMenu id="idParrain" value="#{membreBean.idMembreParrain}" rendered="#{membreBean.parrainRendered}">
			   			<f:selectItems value="#{membreBean.parrainList}" var="c" itemLabel="#{c.membrePrenom} #{c.membreNom}" itemValue="#{c.idMembre}" />
			   		</h:selectOneMenu>			   		
			   		
					<h:outputLabel value="#{msg.libelle_cpt_active}" />
					<h:selectOneRadio value="#{membreBean.membre.isActif}">
			   			<f:selectItems value="#{referentielBean.radioButtonOuiNon}" />
			   		</h:selectOneRadio>
			   		
					<h:outputLabel value="#{msg.libelle_drt_reduc}" rendered="#{membreBean.hasReducRendered}" />
					<h:selectOneRadio value="#{membreBean.membre.isDefaultPassword}" rendered="#{membreBean.hasReducRendered}">
			   			<f:selectItems value="#{referentielBean.radioButtonOuiNon}" />
			   		</h:selectOneRadio>			   		
			   		
			   		<h:button type="button" value="#{msg.libelle_retour}" outcome="membres"/>
					<h:commandButton type="submit" value="#{msg.libelle_valider}" actionListener="#{membreBean.insertOrUpdateMembre()}"/>				        
				</h:panelGrid>
			</h:form>
		</ui:define>

	</ui:composition>
</h:body>
</html>
